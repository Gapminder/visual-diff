<!doctype html>
<html>

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <title>Vizabi Testing</title>
  <script src="https://d3js.org/d3.v4.js"></script>
  <link href="style.css" rel="stylesheet" type="text/css" >
  <link href="libs/vizabi.css" rel="stylesheet" type="text/css" >
  <link href="libs/bubblechart.css" rel="stylesheet" type="text/css">
  <link href="libs/linechart.css" rel="stylesheet" type="text/css">
  <script src="libs/vizabi.js"></script>
  <script src="libs/bubblechart.js"></script>
  <script src="libs/linechart.js"></script>
  <script src="libs/vizabi-ddfcsv-reader.js"></script>
  <script src="libs/vizabi-ws-reader.js"></script>
  <script src="libs/vizabi-ddfcsv-reader.js"></script>
</head>

<body>
  <p id="instructions">Y = develop, X = stage. If bubbles are on the diagonal y=x, that means no change. Shortcuts: [ and ]</p>
  
  <select id="concepts_selector" onchange="update_chart();">
  <option value="" selected="selected">--- pick an indicator to compare ---</option>

  <option value="coal_consumption_per_cap">BP ENERGY coal_consumption_per_cap</option>
  <option value="coal_consumption_total">BP ENERGY coal_consumption_total</option>
  <option value="electricity_generation_per_person">BP ENERGY electricity_generation_per_person</option>
  <option value="electricity_generation_total">BP ENERGY electricity_generation_total</option>
  <option value="natural_gas_production_per_person">BP ENERGY natural_gas_production_per_person</option>
  <option value="natural_gas_production_total">BP ENERGY natural_gas_production_total</option>
  <option value="natural_gas_proved_reserves_total">BP ENERGY natural_gas_proved_reserves_total</option>
  <option value="natural_gas_proven_reserves_per_person">BP ENERGY natural_gas_proven_reserves_per_person</option>
  <option value="oil_consumption_per_cap">BP ENERGY oil_consumption_per_cap</option>
  <option value="oil_consumption_total">BP ENERGY oil_consumption_total</option>
  <option value="oil_production_per_person">BP ENERGY oil_production_per_person</option>
  <option value="oil_production_total">BP ENERGY oil_production_total</option>
  <option value="oil_proved_reserves_total">BP ENERGY oil_proved_reserves_total</option>
  <option value="oil_proven_reserves_per_person">BP ENERGY oil_proven_reserves_per_person</option>
    
  <option value="corruption_perception_index_cpi">CPI</option>
  <option value="hdi_human_development_index">HDI</option>
    
  <option value="agricultural_water_withdrawal_percent_of_total">FAO agricultural_water_withdrawal_percent_of_total</option>
  <option value="biomass_stock_in_forest_tons">FAO biomass_stock_in_forest_tons</option>
  <option value="desalinated_water_produced_billion_cu_meters">FAO desalinated_water_produced_billion_cu_meters</option>
  <option value="food_supply_kilocalories_per_person_and_day">FAO food_supply_kilocalories_per_person_and_day</option>
  <option value="forest_coverage_percent">FAO forest_coverage_percent</option>
  <option value="forest_land_total_area_ha">FAO forest_land_total_area_ha</option>
  <option value="industrial_water_withdrawal_percent_of_total">FAO industrial_water_withdrawal_percent_of_total</option>
  <option value="internal_renewable_water_cu_meters_per_person">FAO internal_renewable_water_cu_meters_per_person</option>
  <option value="municipal_water_withdrawal_cu_meters_per_person">FAO municipal_water_withdrawal_cu_meters_per_person</option>
  <option value="municipal_water_withdrawal_percent_of_total">FAO municipal_water_withdrawal_percent_of_total</option>
  <option value="planted_forest_area_ha">FAO planted_forest_area_ha</option>
  <option value="primary_forest_area_ha">FAO primary_forest_area_ha</option>
  <option value="privately_owned_forest_land_percent">FAO privately_owned_forest_land_percent</option>
  <option value="renewable_water_cu_meters_per_person">FAO renewable_water_cu_meters_per_person</option>
  <option value="sugar_per_person_g_per_day">FAO sugar_per_person_g_per_day</option>
  <option value="total_water_withdrawal_billion_cu_meters">FAO total_water_withdrawal_billion_cu_meters</option>
  <option value="water_withdrawal_cu_meters_per_person">FAO water_withdrawal_cu_meters_per_person</option>
  <option value="wood_removal_cubic_meters">FAO wood_removal_cubic_meters</option>
    
  </select>
  <button id="prev_option" onclick="nextPrevOpt(-1);">PREVIOUS</button>
  <button id="next_option" onclick="nextPrevOpt(+1);">NEXT</button>
  <div id="placeholder-bubble"></div>
  <div id="placeholder-line"></div>
  <script src="script.js"></script>
  <script>
    var nextPrevOpt = function(direction) {
      var sel = document.getElementById('concepts_selector');
      var i = sel.selectedIndex + direction;
      if (i < 0) i = sel.options.length - 1;
      sel.options[i % sel.options.length].selected = true;
      update_chart();
    }

    window.onkeypress = function(e) {
      if (e.keyCode == 91) document.getElementById('prev_option').click();
      if (e.keyCode == 93) document.getElementById('next_option').click();
    }


    var update_chart = function() {
      var concept_name = document.getElementById('concepts_selector').value
      if(!concept_name) return;

      viz1.model.state.marker.axis_x.setWhich({
        concept: concept_name,
        dataSource: "data_alternative"
      })
      viz1.model.state.marker.axis_y.setWhich({
        concept: concept_name,
        dataSource: "data"
      })
      viz2.model.state.marker.axis_y.setWhich({
        concept: concept_name,
        dataSource: "data"
      })
    };
  </script>
</body>

</html>